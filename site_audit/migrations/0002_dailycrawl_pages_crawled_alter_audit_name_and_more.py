# Generated by Django 4.2.4 on 2024-06-03 19:47

from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):
    dependencies = [
        ("users", "0003_remove_company_address_remove_company_city_and_more"),
        ("site_audit", "0001_initial"),
    ]

    operations = [
        migrations.AddField(
            model_name="dailycrawl",
            name="pages_crawled",
            field=models.IntegerField(default=0),
        ),
        migrations.AlterField(
            model_name="audit",
            name="name",
            field=models.CharField(
                choices=[
                    ("CRAWL_DEPTH", "CRAWL_DEPTH"),
                    ("HAS_URL_ISSUES", "HAS_URL_ISSUES"),
                    ("HAS_ONLY_ONE_H1", "HAS_ONLY_ONE_H1"),
                    ("PSI_PERFORMANCE_SCORE", "PERFORMANCE_SCORE"),
                    ("PSI_FIRST-CONTENTFUL-PAINT", "FIRST_CONTENTFUL_PAINT"),
                    ("PSI_LARGEST-CONTENTFUL-PAINT", "LARGEST_CONTENTFUL_PAINT"),
                    ("PSI_TOTAL-BLOCKING-TIME", "TOTAL_BLOCKING_TIME"),
                    ("PSI_CUMULATIVE-LAYOUT-SHIFT", "CUMULATIVE_LAYOUT_SHIFT"),
                    ("PSI_SPEED-INDEX", "SPEED_INDEX"),
                    ("PSI_INTERACTIVE", "INTERACTIVE"),
                    ("PSI_MAX-POTENTIAL-FID", "MAX_POTENTIAL_FID"),
                    ("PSI_FIRST-MEANINGFUL-PAINT", "FIRST_MEANINGFUL_PAINT"),
                    ("PSI_RENDER-BLOCKING-RESOURCES", "RENDER_BLOCKING_RESOURCES"),
                    ("PSI_USES-RESPONSIVE-IMAGES", "USES_RESPONSIVE_IMAGES"),
                    ("PSI_OFFSCREEN-IMAGES", "OFFSCREEN_IMAGES"),
                    ("PSI_UNMINIFIED-CSS", "UNMINIFIED_CSS"),
                    ("PSI_UNMINIFIED-JAVASCRIPT", "UNMINIFIED_JAVASCRIPT"),
                    ("PSI_UNUSED-CSS-RULES", "UNUSED_CSS_RULES"),
                    ("PSI_UNUSED-JAVASCRIPT", "UNUSED_JAVASCRIPT"),
                    ("PSI_USES-OPTIMIZED-IMAGES", "USES_OPTIMIZED_IMAGES"),
                    ("PSI_MODERN-IMAGE-FORMATS", "MODERN_IMAGE_FORMATS"),
                    ("PSI_USES-TEXT-COMPRESSION", "USES_TEXT_COMPRESSION"),
                    ("PSI_USES-REL-PRECONNECT", "USES_REL_PRECONNECT"),
                    ("PSI_SERVER-RESPONSE-TIME", "SERVER_RESPONSE_TIME"),
                    ("PSI_REDIRECTS", "REDIRECTS"),
                    ("PSI_USES-HTTP2", "USES_HTTP2"),
                    ("PSI_EFFICIENT-ANIMATED-CONTENT", "EFFICIENT_ANIMATED_CONTENT"),
                    ("PSI_DUPLICATED-JAVASCRIPT", "DUPLICATED_JAVASCRIPT"),
                    ("PSI_LEGACY-JAVASCRIPT", "LEGACY_JAVASCRIPT"),
                    ("PSI_PRIORITIZE-LCP-IMAGE", "PRIORITIZE_LCP_IMAGE"),
                    ("PSI_TOTAL-BYTE-WEIGHT", "TOTAL_BYTE_WEIGHT"),
                    ("PSI_USES-LONG-CACHE-TTL", "USES_LONG_CACHE_TTL"),
                    ("PSI_DOM-SIZE", "DOM_SIZE"),
                    ("PSI_CRITICAL-REQUEST-CHAINS", "CRITICAL_REQUEST_CHAINS"),
                    ("PSI_USER-TIMINGS", "USER_TIMINGS"),
                    ("PSI_BOOTUP-TIME", "BOOTUP_TIME"),
                    ("PSI_MAINTHREAD-WORK-BREAKDOWN", "MAINTHREAD_WORK_BREAKDOWN"),
                    ("PSI_FONT-DISPLAY", "FONT_DISPLAY"),
                    ("PSI_THIRD-PARTY-SUMMARY", "THIRD_PARTY_SUMMARY"),
                    ("PSI_THIRD-PARTY-FACADES", "THIRD_PARTY_FACADES"),
                    (
                        "PSI_LARGEST-CONTENTFUL-PAINT-ELEMENT",
                        "LARGEST_CONTENTFUL_PAINT_ELEMENT",
                    ),
                    ("PSI_LCP-LAZY-LOADED", "LCP_LAZY_LOADED"),
                    ("PSI_LAYOUT-SHIFTS", "LAYOUT_SHIFTS"),
                    (
                        "PSI_USES-PASSIVE-EVENT-LISTENERS",
                        "USES_PASSIVE_EVENT_LISTENERS",
                    ),
                    ("PSI_NO-DOCUMENT-WRITE", "NO_DOCUMENT_WRITE"),
                    ("PSI_LONG-TASKS", "LONG_TASKS"),
                    ("PSI_NON-COMPOSITED-ANIMATIONS", "NON_COMPOSITED_ANIMATIONS"),
                    ("PSI_UNSIZED-IMAGES", "UNSIZED_IMAGES"),
                    ("PSI_BF-CACHE", "BF_CACHE"),
                    ("PSI_NETWORK-REQUESTS", "NETWORK_REQUESTS"),
                    ("PSI_NETWORK-RTT", "NETWORK_RTT"),
                    ("PSI_NETWORK-SERVER-LATENCY", "NETWORK_SERVER_LATENCY"),
                    ("PSI_MAIN-THREAD-TASKS", "MAIN_THREAD_TASKS"),
                    ("PSI_RESOURCE-SUMMARY", "RESOURCE_SUMMARY"),
                    ("PSI_ACCESSIBILITY_SCORE", "ACCESSIBILITY_SCORE"),
                    ("PSI_ACCESSKEYS", "ACCESSKEYS"),
                    ("PSI_ARIA-ALLOWED-ATTR", "ARIA_ALLOWED_ATTR"),
                    ("PSI_ARIA-ALLOWED-ROLE", "ARIA_ALLOWED_ROLE"),
                    ("PSI_ARIA-COMMAND-NAME", "ARIA_COMMAND_NAME"),
                    ("PSI_ARIA-CONDITIONAL-ATTR", "ARIA_CONDITIONAL_ATTR"),
                    ("PSI_ARIA-DEPRECATED-ROLE", "ARIA_DEPRECATED_ROLE"),
                    ("PSI_ARIA-DIALOG-NAME", "ARIA_DIALOG_NAME"),
                    ("PSI_ARIA-HIDDEN-BODY", "ARIA_HIDDEN_BODY"),
                    ("PSI_ARIA-HIDDEN-FOCUS", "ARIA_HIDDEN_FOCUS"),
                    ("PSI_ARIA-INPUT-FIELD-NAME", "ARIA_INPUT_FIELD_NAME"),
                    ("PSI_ARIA-METER-NAME", "ARIA_METER_NAME"),
                    ("PSI_ARIA-PROGRESSBAR-NAME", "ARIA_PROGRESSBAR_NAME"),
                    ("PSI_ARIA-PROHIBITED-ATTR", "ARIA_PROHIBITED_ATTR"),
                    ("PSI_ARIA-REQUIRED-ATTR", "ARIA_REQUIRED_ATTR"),
                    ("PSI_ARIA-REQUIRED-CHILDREN", "ARIA_REQUIRED_CHILDREN"),
                    ("PSI_ARIA-REQUIRED-PARENT", "ARIA_REQUIRED_PARENT"),
                    ("PSI_ARIA-ROLES", "ARIA_ROLES"),
                    ("PSI_ARIA-TEXT", "ARIA_TEXT"),
                    ("PSI_ARIA-TOGGLE-FIELD-NAME", "ARIA_TOGGLE_FIELD_NAME"),
                    ("PSI_ARIA-TOOLTIP-NAME", "ARIA_TOOLTIP_NAME"),
                    ("PSI_ARIA-TREEITEM-NAME", "ARIA_TREEITEM_NAME"),
                    ("PSI_ARIA-VALID-ATTR-VALUE", "ARIA_VALID_ATTR_VALUE"),
                    ("PSI_ARIA-VALID-ATTR", "ARIA_VALID_ATTR"),
                    ("PSI_BUTTON-NAME", "BUTTON_NAME"),
                    ("PSI_BYPASS", "BYPASS"),
                    ("PSI_COLOR-CONTRAST", "COLOR_CONTRAST"),
                    ("PSI_DEFINITION-LIST", "DEFINITION_LIST"),
                    ("PSI_DLITEM", "DLITEM"),
                    ("PSI_DUPLICATE-ID-ARIA", "DUPLICATE_ID_ARIA"),
                    ("PSI_FORM-FIELD-MULTIPLE-LABELS", "FORM_FIELD_MULTIPLE_LABELS"),
                    ("PSI_FRAME-TITLE", "FRAME_TITLE"),
                    ("PSI_HEADING-ORDER", "HEADING_ORDER"),
                    ("PSI_HTML-HAS-LANG", "HTML_HAS_LANG"),
                    ("PSI_HTML-LANG-VALID", "HTML_LANG_VALID"),
                    ("PSI_HTML-XML-LANG-MISMATCH", "HTML_XML_LANG_MISMATCH"),
                    ("PSI_IMAGE-REDUNDANT-ALT", "IMAGE_REDUNDANT_ALT"),
                    ("PSI_INPUT-BUTTON-NAME", "INPUT_BUTTON_NAME"),
                    ("PSI_INPUT-IMAGE-ALT", "INPUT_IMAGE_ALT"),
                    ("PSI_LABEL", "LABEL"),
                    ("PSI_LINK-IN-TEXT-BLOCK", "LINK_IN_TEXT_BLOCK"),
                    ("PSI_LINK-NAME", "LINK_NAME"),
                    ("PSI_LIST", "LIST"),
                    ("PSI_LISTITEM", "LISTITEM"),
                    ("PSI_META-REFRESH", "META_REFRESH"),
                    ("PSI_META-VIEWPORT", "META_VIEWPORT"),
                    ("PSI_OBJECT-ALT", "OBJECT_ALT"),
                    ("PSI_SELECT-NAME", "SELECT_NAME"),
                    ("PSI_SKIP-LINK", "SKIP_LINK"),
                    ("PSI_TABINDEX", "TABINDEX"),
                    ("PSI_TABLE-DUPLICATE-NAME", "TABLE_DUPLICATE_NAME"),
                    ("PSI_TARGET-SIZE", "TARGET_SIZE"),
                    ("PSI_TD-HEADERS-ATTR", "TD_HEADERS_ATTR"),
                    ("PSI_TH-HAS-DATA-CELLS", "TH_HAS_DATA_CELLS"),
                    ("PSI_VALID-LANG", "VALID_LANG"),
                    ("PSI_VIDEO-CAPTION", "VIDEO_CAPTION"),
                    ("PSI_FOCUSABLE-CONTROLS", "FOCUSABLE_CONTROLS"),
                    (
                        "PSI_INTERACTIVE-ELEMENT-AFFORDANCE",
                        "INTERACTIVE_ELEMENT_AFFORDANCE",
                    ),
                    ("PSI_LOGICAL-TAB-ORDER", "LOGICAL_TAB_ORDER"),
                    ("PSI_VISUAL-ORDER-FOLLOWS-DOM", "VISUAL_ORDER_FOLLOWS_DOM"),
                    ("PSI_FOCUS-TRAPS", "FOCUS_TRAPS"),
                    ("PSI_MANAGED-FOCUS", "MANAGED_FOCUS"),
                    ("PSI_USE-LANDMARKS", "USE_LANDMARKS"),
                    ("PSI_OFFSCREEN-CONTENT-HIDDEN", "OFFSCREEN_CONTENT_HIDDEN"),
                    ("PSI_CUSTOM-CONTROLS-LABELS", "CUSTOM_CONTROLS_LABELS"),
                    ("PSI_CUSTOM-CONTROLS-ROLES", "CUSTOM_CONTROLS_ROLES"),
                    ("PSI_EMPTY-HEADING", "EMPTY_HEADING"),
                    (
                        "PSI_IDENTICAL-LINKS-SAME-PURPOSE",
                        "IDENTICAL_LINKS_SAME_PURPOSE",
                    ),
                    ("PSI_LANDMARK-ONE-MAIN", "LANDMARK_ONE_MAIN"),
                    ("PSI_LABEL-CONTENT-NAME-MISMATCH", "LABEL_CONTENT_NAME_MISMATCH"),
                    ("PSI_TABLE-FAKE-CAPTION", "TABLE_FAKE_CAPTION"),
                    ("PSI_TD-HAS-HEADER", "TD_HAS_HEADER"),
                    ("PSI_IS-CRAWLABLE", "IS_CRAWLABLE"),
                    ("PSI_DOCUMENT-TITLE", "DOCUMENT_TITLE"),
                    ("PSI_META-DESCRIPTION", "META_DESCRIPTION"),
                    ("PSI_HTTP-STATUS-CODE", "HTTP_STATUS_CODE"),
                    ("PSI_LINK-TEXT", "LINK_TEXT"),
                    ("PSI_CRAWLABLE-ANCHORS", "CRAWLABLE_ANCHORS"),
                    ("PSI_ROBOTS-TXT", "ROBOTS_TXT"),
                    ("PSI_IMAGE-ALT", "IMAGE_ALT"),
                    ("PSI_HREFLANG", "HREFLANG"),
                    ("PSI_CANONICAL", "CANONICAL"),
                    ("PSI_STRUCTURED-DATA", "STRUCTURED_DATA"),
                    ("PSI_IS-ON-HTTPS", "IS_ON_HTTPS"),
                    ("PSI_REDIRECTS-HTTP", "REDIRECTS_HTTP"),
                    ("PSI_GEOLOCATION-ON-START", "GEOLOCATION_ON_START"),
                    ("PSI_NOTIFICATION-ON-START", "NOTIFICATION_ON_START"),
                    ("PSI_CSP-XSS", "CSP_XSS"),
                    ("PSI_PASTE-PREVENTING-INPUTS", "PASTE_PREVENTING_INPUTS"),
                    ("PSI_IMAGE-ASPECT-RATIO", "IMAGE_ASPECT_RATIO"),
                    ("PSI_IMAGE-SIZE-RESPONSIVE", "IMAGE_SIZE_RESPONSIVE"),
                    ("PSI_VIEWPORT", "VIEWPORT"),
                    ("PSI_FONT-SIZE", "FONT_SIZE"),
                    ("PSI_DOCTYPE", "DOCTYPE"),
                    ("PSI_CHARSET", "CHARSET"),
                    ("PSI_DEPRECATIONS", "DEPRECATIONS"),
                    ("PSI_THIRD-PARTY-COOKIES", "THIRD_PARTY_COOKIES"),
                    ("PSI_ERRORS-IN-CONSOLE", "ERRORS_IN_CONSOLE"),
                    ("PSI_VALID-SOURCE-MAPS", "VALID_SOURCE_MAPS"),
                    ("PSI_INSPECTOR-ISSUES", "INSPECTOR_ISSUES"),
                ],
                db_index=True,
                max_length=50,
                primary_key=True,
                serialize=False,
            ),
        ),
        migrations.CreateModel(
            name="DailyPsiAudit",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("started_at", models.DateTimeField(auto_now_add=True)),
                ("finished_at", models.DateTimeField(blank=True, null=True)),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("PENDING", "The crawl is pending."),
                            ("RUNNING", "The crawl is running."),
                            ("SUCCESS", "The crawl has been successfully done."),
                            ("FAILED", "The crawl failed."),
                        ],
                        default="RUNNING",
                        max_length=50,
                    ),
                ),
                ("pages_audited", models.IntegerField(default=0)),
                (
                    "company",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE, to="users.company"
                    ),
                ),
            ],
        ),
    ]
